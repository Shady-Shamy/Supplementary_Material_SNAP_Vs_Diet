<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SNAP Vs Diet Quality - Data Management</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SNAP Vs Diet Quality</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./Survey_Questions.html" rel="" target="">
 <span class="menu-text">Survey Questions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Data_Collection.html" rel="" target="">
 <span class="menu-text">Data Collection</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Data_Management.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Management</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-analysis" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-analysis">    
        <li>
    <a class="dropdown-item" href="./Imputations.html" rel="" target="">
 <span class="dropdown-text">Imputations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Variable_Selection.html" rel="" target="">
 <span class="dropdown-text">Variable Selection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Model_Diagnostics.html" rel="" target="">
 <span class="dropdown-text">Model Diagnostics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Campus_Type_Analysis.html" rel="" target="">
 <span class="dropdown-text">Campus Type Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./Manuscript_Files.html" rel="" target="">
 <span class="menu-text">Manuscript Files</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Statewide_and_Pilot2_Comparison.html" rel="" target="">
 <span class="menu-text">Cohort Comparison</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Management</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<blockquote class="blockquote">
<p>This page explains all data management steps taken to clean and create all variables. Two clean data sets were used (one from the second pilot study and one from the statewide study), and all code for any additional data management procedures are shown below as well as a text description of all procedures.</p>
</blockquote>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Data Management Text Description</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Statewide Data Management Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Pilot 2 Data Management Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Additional Code for Combined Data</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<blockquote class="blockquote">
<p>In all questions in the survey, students had the option to decline to answer by selecting “Prefer not to answer.” All of these “Prefer not to answer” responses were coded as missing and then later imputed. Race and ethnicity were asked using the US census tool where students were first asked about their ethnicity in a single-selection multiple choice question and then their race in a select all that apply question. Students appeared to be confused between race and ethnicity as there were many students who identified as Hispanic in the ethnicity question and then proceeded to choose “Prefer not to answer” in the race question. Race and ethnicity were coded as the following 5 categories: Hispanic White, Non-Hispanic White, Non-Hispanic Black, Non-Hispanic Asian (having only selected one Asian race), and Other (including two or more races, Hispanic Blacks, Hispanic Asians, American Indian or Alaska Native, Native Hawaiian or Other Pacific Islander, and unknown race or ethnicity).</p>
</blockquote>
<blockquote class="blockquote">
<p>Those who chose “Gender Queer or Gender-Nonconforming,” “Gender non-binary,” and “Gender Unlisted” were dropped from the analysis. Those who chose “Prefer not to answer” were kept in the data set and imputed (n = 19).</p>
</blockquote>
<blockquote class="blockquote">
<p>Age was rounded down to the nearest whole number. Paid work hours, unpaid work hours, and caregiving hours were divided by 10 and units were divided by 4 to better interpret the results.</p>
</blockquote>
<blockquote class="blockquote">
<p>Cooking confidence was surveyed on a 5-point Likert scale asking “How confident are you that you can use basic cooking skills, like cutting vegetables, fruits and measuring out ingredients, or following a recipe?” Those who responded “Not at all confident”, “Not very confident”, or “Neutral” were coded as “No” (not confident). Those who chose “Somewhat confident” or “Very Confident” were coded as “Yes” (confident).</p>
</blockquote>
<blockquote class="blockquote">
<p>Health consciousness was assessed on a 5-point Likert scale stating “I do not think about my eating/food habits.” Those who chose “Strongly disagree”, or “Disagree” were coded as “Yes” (regularly thinks about eating). Those who chose “Neither agree nor disagree”, “Agree”, or “Strongly agree” were coded as “No” (doesn’t regularly think about eating).</p>
</blockquote>
<blockquote class="blockquote">
<p>Kitchen access was assessed on a 5-point Likert scale stating “I do not regularly have access to a kitchen where I can prepare meals.” Those who chose “Strongly disagree”, or “Disagree” were coded as “Yes” (has kitchen access). Those who chose “Neither agree nor disagree”, “Agree”, or “Strongly agree” were coded as “No” (doesn’t have kitchen access).</p>
</blockquote>
<blockquote class="blockquote">
<p>Adequate storage room was assessed on a 5-point Likert scale stating “I do not have enough room to store food items.” Those who chose “Strongly disagree”, or “Disagree” were coded as “Yes” (has adequate storage room). Those who chose “Neither agree nor disagree”, “Agree”, or “Strongly agree” were coded as “No” (doesn’t have adequate storage room).</p>
</blockquote>
<blockquote class="blockquote">
<p>Adequate storage access was assessed on a 5-point Likert scale stating “I have a secure place to store fresh food and pantry items.” Those who chose “Strongly Agree”, or “Agree” were coded as “Yes” (has adequate storage access). Those who chose “Neither agree nor disagree”, “Disagree”, or “Strongly disagree” were coded as “No” (doesn’t have adequate storage access).</p>
</blockquote>
<blockquote class="blockquote">
<p>Living arrangements were asked as a multiple-choice question with 13 options. Those who responded, “I live with parents or other relatives, paying rent with my own money or”I live with parents or other relatives, not paying rent with my own money” were coded as “Yes” (living with parents). All other non-missing options were coded as “No” (not living with parents).</p>
</blockquote>
<blockquote class="blockquote">
<p>Homelessness in the past year was determined using a series of eight questions. Anyone who responded as living in any one of these locations in the past year and/or month were classified as homeless in the past year: “At a shelter”, “Temporarily living with a relative, friend, or couch surfing until I find other housing,” “Temporarily at a hotel or motel without a permanent home to return to (not on vacation or business travel)”, “In a transitional housing or independent living program”, “At a group home such as a halfway house or residential program for mental health or substance abuse,” “Outdoor location such as street, sidewalk, alley, park, etc.,” “In a car, truck, van, RV or camper,” and “In a closed area/space with a roof not meant for human habituation such as an abandoned building, garage, tent, etc.”</p>
</blockquote>
<blockquote class="blockquote">
<p>Housing insecurity was determined based on a series of eight questions. Anyone who answered “Yes” to at least three of these questions were classified as housing insecure: 1) “In the past 12 months, was there a rent or mortgage increase that made it difficult to pay?” 2) “In the past 12 months, have you been unable to pay or underpaid your rent or mortgage?” 3) “In the past 12 months, have you ever been late paying rent or mortgage?” 4) “In the past 12 months, have you been unable to pay or underpaid a utility bill?” 5) “In the past 12 months, have you lived with others beyond the expected capacity of your house or apartment?” 6) “In the past 12 months, have you been asked to leave your home by someone you lived with?” 7) “In the past 12 months, have you been evicted?” and 8) “In the past 12 months, have you had to stay in a hostile housing environment or abusive relationship because you had no other place to live?” Cases with missing values without three “Yes” responses and without six “No” responses were set to missing. For example, someone who responded with six “No” responses and had two missing values will make it impossible to have three “Yes” responses and this person will be marked as “No” (not housing insecure). While someone with two “Yes” responses and one or more missing responses will be marked as missing in the housing insecurity variable since they can possibly still be housing insecure.</p>
</blockquote>
<blockquote class="blockquote">
<p>Food insecurity was measured using the 2-item food security assessment which asks: “Within the past 12 months we worried whether our food would run out before we got money to buy more” and “Within the past 12 months the food we bought just didn’t last and we didn’t have money to get more.” Anyone who answered “often true” or “sometimes true” to both questions is deemed food insecure.</p>
</blockquote>
<blockquote class="blockquote">
<p>Physical activity was surveyed in three separate questions asking how many days per week a student engages in moderate exercise, strength training exercise, and vigorous exercise. Students who engaged in any of the three forms of exercise for at least one day per week were coded as “Yes” (engages in physical activity). Students who responded zero days per week in all three questions were coded as “No” (does not engage in physical activity).</p>
</blockquote>
<blockquote class="blockquote">
<p>Paid work hours, unpaid work hours, and caregiving hours were all divided by 10 to give a more interpretable odds ratio. Similarly, enrolled units were divided by 4.</p>
</blockquote>
<blockquote class="blockquote">
<p>SNAP eligibility was determined based on the following criteria for students as documented by the California Department of Social Services (CDSS): the student must be between the ages 18 and 49; must be a U.S. citizen or lawful permanent resident; must be enrolled in at least half-time units (6 units); must receive less than 11 meals per week from other sources; must meet income and household requirements; and must meet at least one work exemption. At the time of the start of the statewide survey, being in the EOP/EOPS exempted students from having to meet a work requirement. Therefore, an assumption that being in the EOP/EOPS will satisfy the work requirement is made when determining SNAP eligibility status in the current study. However, it should be noted that as of September 2022, being in the EOP/EOPS is no longer an exemption unless the school has applied for their program to be part of the Local Programs that Increases Employability. Additionally, if a person is older than 49 and/or is enrolled in less than six units, the CDSS does not classify that person as a student, and that person only needs to meet the income/household and citizenship requirements to be eligible for SNAP.</p>
</blockquote>
<blockquote class="blockquote">
<p>SNAP status was created using five questions, whether they are currently using SNAP, household size, monthly household income, U.S. citizenship, and lawful permanent residency if not a U.S. citizen. Those that reported currently using SNAP were coded as “SNAP Recipients”. Those that met the SNAP eligibility criteria and did not receive SNAP benefits were coded as “Likely Eligible Non-Recipient.” Those that did not meet SNAP eligibility criteria and did not receive SNAP benefits were coded as “Income-Ineligible Non-Recipient.”</p>
</blockquote>
<blockquote class="blockquote">
<p>Fast food intake responses were recorded in the following ranges “Zero times per week,” “1-2 times per week,” “3-4 times per week,” “5-6 times per week,” “7-8 times per week,” “9-10 times per week,” and “11 or more times per week.” Due to low responses in the higher frequency groups, students who responded “5-6 times per week” and above were combined into a “5 or more times per week” group to improve model fit.</p>
</blockquote>
<blockquote class="blockquote">
<p>Daily SSB intake responses were recorded in the following ranges: “Zero ounces,” “1-8 ounces,” “9-16 ounces,” “17-24 ounces,” “25-36 ounces,” “37-48 ounces,” “49-56 ounces,” “57-64 ounces,” and “64 ounces or more ounces.” Due to low responses in the higher intake groups, students with responses above 17 ounces were combined into a “17 or more ounces” group to improve model fit.</p>
</blockquote>
<blockquote class="blockquote">
<p>F&amp;V intake responses were recorded in the following ranges: “Zero servings per day,” “1-2 servings per day,” “3-4 servings per day,” and “5 or more servings per day.” Due to a low number of students responding “5 or more servings per day,” this level was combined into a “3 or more servings per day” group to improve the fit of the regression models.</p>
</blockquote>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">error =</span> <span class="cn">FALSE</span>,<span class="at">warning =</span> <span class="cn">FALSE</span>,<span class="at">message =</span> <span class="cn">FALSE</span>,<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>bns <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"/Users/shady/Box/CHC All/10. Research, Evaluation &amp; Professional Presentations/02. CHC Grad Student Research/Shady Shamy/Supplementary_Material_CalFresh_Vs_Diet/raw_data/bns3_statewide_clean.rds"</span>))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>Cohort <span class="ot">&lt;-</span> <span class="st">"Statewide"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Age ----</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># No cleaning needed</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ethnicity -----</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>eth_hispanic2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>eth_hispanic, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Hispanic"</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Non Hispanic"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># academic year -----</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>academic_level <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q15, <span class="st">"Freshman (0-29 semester units or 0-44 quarter units)"</span> <span class="ot">=</span> <span class="st">"Freshman"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Sophomore (30-59 semester units or 45-89 quarter units)"</span> <span class="ot">=</span> <span class="st">"Sophomore"</span>,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Junior (60-89 semester units or 90-134 quarter units)"</span> <span class="ot">=</span> <span class="st">"Junior"</span>,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Senior (90+ semester units or 135+ quarter units)"</span> <span class="ot">=</span> <span class="st">"Senior"</span>,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"None of these apply"</span> <span class="ot">=</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 item-Food Insecurity ( 1 = Food Insecure): food_insecure_2item</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Gender -----</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Man"</span> <span class="sc">~</span> <span class="st">"Male"</span>, bns<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Woman"</span> <span class="sc">~</span> <span class="st">"Female"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Confidence in cooking Yes Vs No ------</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co"># How confident are you that you can use basic cooking skills, like cutting fruits and vegetables, measuring out ingredients, or following a recipe?</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>cooking_confident <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q82_2, <span class="st">"Not at all confident"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Not very confident"</span> <span class="ot">=</span> <span class="st">"No"</span>, </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Neutral"</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Somewhat confident"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Very Confident"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Living With Family Vs No -----</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>living_with_family <span class="ot">&lt;-</span> <span class="fu">case_when</span>(<span class="fu">grepl</span>(<span class="st">"I live with parents or other relatives, paying rent with my own money|I live with parents or other relatives, not paying rent with my own money"</span>, bns<span class="sc">$</span>q25, <span class="at">fixed =</span> <span class="cn">FALSE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">grepl</span>(<span class="st">"I live in university housing or residence halls|I rent an apartment or house with roommates|I rent an apartment or house without roommates|I own my own home|I live in transitional housing or a halfway home|I am temporarily living with friends or relatives without permanent housing|I am currently living at an outdoor location|Other|I live in a sorority or fraternity house|I am temporarily living in a homeless shelter without permanent housing"</span>, </span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>                                          bns<span class="sc">$</span>q25, <span class="at">fixed =</span> <span class="cn">FALSE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Total Hours including paid, unpaid, unit hours and caregiving hours ------</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>unit_hours <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">*</span>(bns<span class="sc">$</span>q18)</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>weekly_hours <span class="ot">&lt;-</span> bns <span class="sc">%&gt;%</span> <span class="fu">select</span>(unit_hours, paid_work_hours, unpaid_work_hours, caregiving_hours) <span class="sc">%&gt;%</span> <span class="fu">rowSums</span>(<span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>weekly_hours_in_tens <span class="ot">&lt;-</span> bns<span class="sc">$</span>weekly_hours<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>bns <span class="ot">&lt;-</span> <span class="fu">rename</span>(bns, <span class="at">units =</span> q18)</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Health Conscious (q76_9) -----</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="co"># I do not think about my eating/food habits</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>health_conscious <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q76_9, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a><span class="co"># SNAP Variables ----</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Create temporary SNAP variable</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>bns <span class="ot">&lt;-</span> bns <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">current_SNAP_temp =</span> <span class="fu">case_when</span>(<span class="fu">grepl</span>(<span class="st">"Currently use as a college student"</span>, q46_1) <span class="sc">~</span> <span class="st">"SNAP"</span>,</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">grepl</span>(<span class="st">"Used it in the past as a college student"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">grepl</span>(<span class="st">"Heard of it, but never used it"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">grepl</span>(<span class="st">"Never heard of it"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">grepl</span>(<span class="st">"Used it before attending college"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>))</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Create  SNAP variable (https://www.cdss.ca.gov/calfreshoutreach/res/toolkit/quickreference/regulationquickreference_e_students.pdf)</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Age and units don't actually matter. if they are between the ages of 18 and 49, and taking more than 6 units, a person is classified as a student and must meet a work exemption (such as EOP). </span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a><span class="co"># However, if they are older than 49 or taking less than 6 units, they are not classified as a student and can still apply to SNAP as a non student. </span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Both a non student and a student need to meet the same income and citizenship requirements. A student differs from a non student by needing to meet a work exemption which all students are EOP and meet an exemption. </span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Reword calfresh_eligible variable to SNAP_eligible</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>bns <span class="ot">&lt;-</span> <span class="fu">rename</span>(bns, <span class="at">SNAP_eligible =</span> calfresh_eligible)</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>SNAP3 <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"SNAP"</span> <span class="sc">~</span> <span class="st">"SNAP Recipient"</span>, </span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>                               bns<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"No SNAP"</span> <span class="sc">&amp;</span> bns<span class="sc">$</span>SNAP_eligible <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Likely Eligible Non-Recipient"</span>,</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>                               bns<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"No SNAP"</span> <span class="sc">&amp;</span> bns<span class="sc">$</span>SNAP_eligible <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Income-Ineligible Non-Recipient"</span>) </span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>SNAP3 <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns<span class="sc">$</span>SNAP3, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"SNAP Recipient"</span>, <span class="st">"Likely Eligible Non-Recipient"</span>, <span class="st">"Income-Ineligible Non-Recipient"</span>))</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a><span class="co"># Fruit/Vegetables ----</span></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>fruits <span class="ot">&lt;-</span> bns<span class="sc">$</span>q77</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>fruits3 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q77, <span class="st">"0 servings per day"</span> <span class="ot">=</span> <span class="st">"0"</span>, </span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"1-2 servings per day"</span> <span class="ot">=</span> <span class="st">"1-2"</span>,</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"3-4 servings per day"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>,</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"5 or more servings per day"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>fruits2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q77, <span class="st">"0 servings per day"</span> <span class="ot">=</span> <span class="st">"2 or less"</span>, </span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"1-2 servings per day"</span> <span class="ot">=</span> <span class="st">"2 or less"</span>,</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"3-4 servings per day"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>,</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"5 or more servings per day"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>)</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>q77 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q77, <span class="st">"0 servings per day"</span> <span class="ot">=</span> <span class="st">"0"</span>, </span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"1-2 servings per day"</span> <span class="ot">=</span> <span class="st">"1-2"</span>,</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"3-4 servings per day"</span> <span class="ot">=</span> <span class="st">"3-4"</span>,</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5 or more servings per day"</span> <span class="ot">=</span> <span class="st">"5 or more"</span>)</span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a><span class="co"># SSB ----</span></span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ssb <span class="ot">&lt;-</span> bns<span class="sc">$</span>q78</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ssb5 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q78, <span class="st">"Zero"</span> <span class="ot">=</span> <span class="st">"Zero"</span>,</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"1-8 ounces"</span> <span class="ot">=</span> <span class="st">"1-8 ounces"</span>, </span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"9-16 ounces"</span> <span class="ot">=</span> <span class="st">"9-16 ounces"</span>,  </span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"17-24 ounces"</span> <span class="ot">=</span>  <span class="st">"17-24 ounces"</span>, </span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"25-36 ounces"</span> <span class="ot">=</span> <span class="st">"25-36 ounces"</span>,</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"37-48 ounces"</span> <span class="ot">=</span> <span class="st">"37 or more ounces"</span>, </span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"49-56 ounces"</span> <span class="ot">=</span>  <span class="st">"37 or more ounces"</span>, </span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"57-64 ounces"</span> <span class="ot">=</span> <span class="st">"37 or more ounces"</span>, </span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"64 ounces or more"</span> <span class="ot">=</span> <span class="st">"37 or more ounces"</span>)</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ssb4 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q78, <span class="st">"Zero"</span> <span class="ot">=</span> <span class="st">"Zero"</span>,</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"1-8 ounces"</span> <span class="ot">=</span> <span class="st">"1-8 ounces"</span>, </span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"9-16 ounces"</span> <span class="ot">=</span> <span class="st">"9-16 ounces"</span>,  </span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"17-24 ounces"</span> <span class="ot">=</span>  <span class="st">"17-24 ounces"</span>, </span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"25-36 ounces"</span> <span class="ot">=</span> <span class="st">"25 or more ounces"</span>,</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"37-48 ounces"</span> <span class="ot">=</span> <span class="st">"25 or more ounces"</span>, </span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"49-56 ounces"</span> <span class="ot">=</span>  <span class="st">"25 or more ounces"</span>, </span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"57-64 ounces"</span> <span class="ot">=</span> <span class="st">"25 or more ounces"</span>, </span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"64 ounces or more"</span> <span class="ot">=</span> <span class="st">"25 or more ounces"</span>)</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a><span class="co"># table(bns$ssb4, useNA = "always")</span></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ssb_numeric <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q78, <span class="st">"Zero"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"1-8 ounces"</span> <span class="ot">=</span> <span class="fl">4.5</span>, </span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"9-16 ounces"</span> <span class="ot">=</span> <span class="fl">12.5</span>,  </span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"17-24 ounces"</span> <span class="ot">=</span>  <span class="fl">20.5</span>, </span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"25-36 ounces"</span> <span class="ot">=</span> <span class="fl">30.5</span>,</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"37-48 ounces"</span> <span class="ot">=</span> <span class="fl">42.5</span>, </span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"49-56 ounces"</span> <span class="ot">=</span>  <span class="fl">52.5</span>, </span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"57-64 ounces"</span> <span class="ot">=</span> <span class="fl">60.5</span>, </span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"64 ounces or more"</span> <span class="ot">=</span> <span class="dv">64</span>)</span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a><span class="co"># table(bns$ssb_numeric, useNA = "always")</span></span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Fast Food ----</span></span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ff4 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q79, <span class="st">"Zero"</span> <span class="ot">=</span> <span class="st">"Zero times per week"</span>, </span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"1-2 times per week"</span> <span class="ot">=</span> <span class="st">"1-2 times"</span>, </span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"3-4 times per week"</span> <span class="ot">=</span> <span class="st">"3-4 times"</span>,</span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"5-6 times per week"</span> <span class="ot">=</span> <span class="st">"5 or more times"</span>,</span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"7-8 times per week"</span> <span class="ot">=</span> <span class="st">"5 or more times"</span>, </span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"9-10 times per week"</span> <span class="ot">=</span> <span class="st">"5 or more times"</span>, </span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"11 times or more per week"</span> <span class="ot">=</span> <span class="st">"5 or more times"</span>)</span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a><span class="co"># table(bns$ff5, useNA = "always")</span></span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>ff_numeric <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q79, <span class="st">"Zero"</span> <span class="ot">=</span> <span class="dv">0</span>, </span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"1-2 times per week"</span> <span class="ot">=</span> <span class="fl">1.5</span>, </span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"3-4 times per week"</span> <span class="ot">=</span> <span class="fl">3.5</span>,</span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"5-6 times per week"</span> <span class="ot">=</span> <span class="fl">5.5</span>,</span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7-8 times per week"</span> <span class="ot">=</span> <span class="fl">7.5</span>, </span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"9-10 times per week"</span> <span class="ot">=</span> <span class="fl">9.5</span>, </span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"11 times or more per week"</span> <span class="ot">=</span> <span class="dv">11</span>)</span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a><span class="co"># table(bns$ff_numeric, useNA = "always")</span></span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a><span class="co"># Kitchen Access ----</span></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a><span class="co"># I do not regularly have access to a kitchen where I can prepare meals.</span></span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>kitchen_access <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q76_1, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a><span class="co"># Storage Access ----</span></span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a><span class="co"># I have a secure place to store fresh food and pantry items.</span></span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>storage_access <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q76_2, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, </span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a><span class="co"># Room for storage ----</span></span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a><span class="co">#  I do not have enough room to store food items.</span></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>storage_room <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns<span class="sc">$</span>q76_3, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a><span class="co"># Physical activity indicator</span></span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a>bns <span class="ot">&lt;-</span> bns <span class="sc">%&gt;%</span> <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">'q83_1'</span>, <span class="st">'q83_2'</span>, <span class="st">'q83_3'</span>), recode,</span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"0 days"</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">"1 day"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"2 days"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"3 days"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"4 days"</span> <span class="ot">=</span> <span class="dv">4</span>, <span class="st">"5 days"</span> <span class="ot">=</span> <span class="dv">5</span>, <span class="st">"6 days"</span> <span class="ot">=</span> <span class="dv">6</span>, <span class="st">"7 days"</span> <span class="ot">=</span> <span class="dv">7</span>)</span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a>physical_act_temp <span class="ot">&lt;-</span> bns <span class="sc">%&gt;%</span> <span class="fu">select</span>(q83_1, q83_2, q83_3) <span class="sc">%&gt;%</span> <span class="fu">rowSums</span>()</span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a>bns<span class="sc">$</span>physical_activity <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(physical_act_temp <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a><span class="co"># Select variables of interest</span></span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a>bns_variables <span class="ot">&lt;-</span> bns <span class="sc">%&gt;%</span>  <span class="fu">select</span>(SNAP3, race_eth, eth_PNTA, eth_hispanic, gender, q7, age, cooking_confident, q82_2,living_with_family, q25, food_insecure_2item, weekly_hours, health_conscious, q76_9, kitchen_access, q76_1, storage_access, q76_2, storage_room, q76_3, Cohort, ff_numeric, ssb_numeric, q78, q79, fruits3, q77, units, q38, q39, household_size, monthly_hh_income, paid_work_hours, unpaid_work_hours, unit_hours, caregiving_hours, q64, q65, school, q46_1, SNAP_eligible, housing_insecure, homelessness_year, homelessness_month, household_size, firstgen, physical_activity, q83_1, q83_2, q83_3, academic_level, q26, q27, q28, q29, q30, q31, q32, q33)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"raw_data/BNSp2_clean.Rdata"</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>Cohort <span class="ot">&lt;-</span> <span class="st">"Pilot 2"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Age ----</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># No cleaning needed</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Ethnicity -----</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>ethn_hispanic2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>eth_hispanic, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Hispanic"</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Non Hispanic"</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$eth_hispanic2, BNSp2b$eth_hispanic, useNA = "always")</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># rename to be able to use grep function on the rest of the "eth_" variables</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">"ethn_hispanic"</span> <span class="ot">=</span> <span class="st">"eth_hispanic"</span> )</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create eth_PNTA </span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># If anyone did not get to this part of the survey, they would have been dropped since this is one of the first questions, hence all the NA values are from "Prefer not to answer responses"</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># All eth variables have the same amount of NA values so using any "eth_" variable would work to create the eth_PNTA variable</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>eth_PNTA <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(BNSp2b<span class="sc">$</span>eth_white), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co">#table(BNSp2b$eth_PNTA, useNA = "always")</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the column names that start with 'eth_'</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>eth_columns <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"eth_"</span>, <span class="fu">names</span>(BNSp2b), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Update 'NA' values to 0 (not selected) in eth_columns</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(eth_columns), <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>, .)))</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$eth_african_amer, useNA = "always")</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="co"># rename back to eth_hispanic</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">"eth_hispanic"</span> <span class="ot">=</span> <span class="st">"ethn_hispanic"</span> )</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">"eth_hispanic2"</span> <span class="ot">=</span> <span class="st">"ethn_hispanic2"</span> )</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of people who selected multiple races (not including PNTA and hispanic)</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>race_total_count <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"eth_"</span>), <span class="sc">-</span>eth_PNTA, <span class="sc">-</span>eth_hispanic, <span class="sc">-</span>eth_hispanic2) <span class="sc">%&gt;%</span> <span class="fu">rowSums</span>()</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>race_eth <span class="ot">&lt;-</span> <span class="fu">case_when</span>(BNSp2b<span class="sc">$</span>eth_hispanic <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>race_total_count <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Hispanic Prefer Not to Answer Race"</span>, </span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>                                 BNSp2b<span class="sc">$</span>eth_hispanic <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_white <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>race_total_count <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Hispanic White"</span>,</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>                                 BNSp2b<span class="sc">$</span>eth_hispanic <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_white <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  BNSp2b<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>race_total_count <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Non Hispanic White"</span>,</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>                                 BNSp2b<span class="sc">$</span>eth_hispanic <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_african_amer <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>race_total_count <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Non Hispanic African American"</span>,</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>                                 BNSp2b<span class="sc">$</span>eth_hispanic <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> (BNSp2b<span class="sc">$</span>eth_japanese <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> BNSp2b<span class="sc">$</span>eth_korean <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> BNSp2b<span class="sc">$</span>eth_asian_indian <span class="sc">==</span> <span class="dv">1</span><span class="sc">|</span> BNSp2b<span class="sc">$</span>eth_other_asian <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span>  </span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>                                                                   BNSp2b<span class="sc">$</span>eth_vietnamese <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> BNSp2b<span class="sc">$</span>eth_chinese <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> BNSp2b<span class="sc">$</span>eth_filipino <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">&amp;</span> </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>                                   BNSp2b<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>race_total_count <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Non Hispanic Asian"</span>,</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>                                 <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other/Unknown"</span>)</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="co"># BNSp2b %&gt;% select(contains("eth_"), race_eth) %&gt;% group_by_all() %&gt;% summarize(count=n()) %&gt;% print(n=100)</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 item-Food Insecurity ( 1 = Food Insecure): food_insecure_2item</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Gender -----</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">case_when</span>(BNSp2b<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Man"</span> <span class="sc">~</span> <span class="st">"Male"</span>, BNSp2b<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Woman"</span> <span class="sc">~</span> <span class="st">"Female"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Confidence in cooking Yes Vs No ------</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="co"># How confident are you that you can use basic cooking skills, like cutting fruits and vegetables, measuring out ingredients, or following a recipe?</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>cooking_confident <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q82_2, <span class="st">"Not at all confident"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Not very confident"</span> <span class="ot">=</span> <span class="st">"No"</span>, </span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Neutral"</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Somewhat confident"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Very confident"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Living With Family Vs No -----</span></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>living_with_family <span class="ot">&lt;-</span> <span class="fu">case_when</span>(<span class="fu">grepl</span>(<span class="st">"I live with parents or other relatives, paying rent with my own money|I live with parents or other relatives, not paying rent with my own money"</span>, BNSp2b<span class="sc">$</span>q25, <span class="at">fixed =</span> <span class="cn">FALSE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">grepl</span>(<span class="st">"I live in university housing or residence halls|I rent an apartment or house with roommates|I rent an apartment or house without roommates|I own my own home|I live in transitional housing or a halfway home|I am temporarily living with friends or relatives, without permanent housing|I am currently living at an outdoor location|Other|I live in a sorority or fraternity house|I am temporarily living in a homeless shelter without permanent housing"</span>, </span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>                                          BNSp2b<span class="sc">$</span>q25, <span class="at">fixed =</span> <span class="cn">FALSE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$q25, BNSp2b$living_with_family, useNA = "always")</span></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Total Hours including paid, unpaid, unit hours and caregiving hours ------</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>units <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q18, <span class="st">"22+"</span> <span class="ot">=</span> <span class="st">"22"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(BNSp2b<span class="sc">$</span>q18, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>paid_work_hours <span class="ot">&lt;-</span>  <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q19, <span class="st">"41+"</span> <span class="ot">=</span> <span class="st">"41"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(BNSp2b<span class="sc">$</span>q19, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>unpaid_work_hours <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q21, <span class="st">"41+"</span> <span class="ot">=</span> <span class="st">"41"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(BNSp2b<span class="sc">$</span>q21, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>caregiving_hours <span class="ot">&lt;-</span><span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q22, <span class="st">"41+"</span> <span class="ot">=</span> <span class="st">"41"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(BNSp2b<span class="sc">$</span>q22, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>unit_hours <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">*</span>(BNSp2b<span class="sc">$</span>units)</span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>weekly_hours <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">select</span>(unit_hours, paid_work_hours, unpaid_work_hours, caregiving_hours) <span class="sc">%&gt;%</span> <span class="fu">rowSums</span>(<span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>weekly_hours_in_tens <span class="ot">&lt;-</span> BNSp2b<span class="sc">$</span>weekly_hours<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Health Conscious (q76_9) -----</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a><span class="co"># I do not think about my eating/food habits</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>health_conscious <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q76_9, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$health_conscious, useNA = "always")</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a><span class="co"># SNAP Variables ----</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename to SNAP_eligible</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> <span class="fu">rename</span>(BNSp2b, <span class="at">SNAP_eligible =</span> calfresh_eligible) </span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a><span class="co"># Create temporary SNAP variable</span></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">current_SNAP_temp =</span> <span class="fu">case_when</span>(<span class="fu">grepl</span>(<span class="st">"Currently use as a college student"</span>, q46_1) <span class="sc">~</span> <span class="st">"SNAP"</span>,</span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a>                                                        <span class="fu">grepl</span>(<span class="st">"Used it in the past as a college student"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>                                                        <span class="fu">grepl</span>(<span class="st">"Heard of it, but never used it"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>                                                        <span class="fu">grepl</span>(<span class="st">"Never heard of it"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>,</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>                                                        <span class="fu">grepl</span>(<span class="st">"Used it before attending college"</span>, q46_1) <span class="sc">~</span> <span class="st">"No SNAP"</span>))</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 3 level SNAP variable</span></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>SNAP3 <span class="ot">&lt;-</span> <span class="fu">case_when</span>(BNSp2b<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"SNAP"</span> <span class="sc">~</span> <span class="st">"SNAP Recipient"</span>, </span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>                           BNSp2b<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"No SNAP"</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>SNAP_eligible <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">~</span> <span class="st">"Likely Eligible Non-Recipient"</span>,</span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>                           BNSp2b<span class="sc">$</span>current_SNAP_temp <span class="sc">==</span> <span class="st">"No SNAP"</span> <span class="sc">&amp;</span> BNSp2b<span class="sc">$</span>SNAP_eligible <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">~</span> <span class="st">"Income-Ineligible Non-Recipient"</span>) </span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a><span class="co"># Fruit/Vegetables ----</span></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>fruits <span class="ot">&lt;-</span> BNSp2b<span class="sc">$</span>fruit_veg_serv_daily</span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>fruits3 <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>fruits, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"0"</span>, </span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"1-2"</span> <span class="ot">=</span> <span class="st">"1-2"</span>,</span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"3-4"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>,</span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"5+"</span> <span class="ot">=</span> <span class="st">"3 or more"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a><span class="co"># Reword to keep in line with statewide data</span></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>q77 <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>fruits, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"0"</span>, </span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"1-2"</span> <span class="ot">=</span> <span class="st">"1-2"</span>,</span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"3-4"</span> <span class="ot">=</span> <span class="st">"3-4"</span>,</span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"5+"</span> <span class="ot">=</span> <span class="st">"5 or more"</span>)</span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a><span class="co"># SSB ----</span></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>ssb <span class="ot">&lt;-</span> BNSp2b<span class="sc">$</span>sugar_drinks_ounces_daily</span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>ssb_numeric <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>ssb, <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"1-8"</span> <span class="ot">=</span> <span class="fl">4.5</span>, </span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"9-16"</span> <span class="ot">=</span> <span class="fl">12.5</span>,  </span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"17-24"</span> <span class="ot">=</span>  <span class="fl">20.5</span>, </span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"25-36"</span> <span class="ot">=</span> <span class="fl">30.5</span>,</span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"37-48"</span> <span class="ot">=</span> <span class="fl">42.5</span>, </span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"49-56"</span> <span class="ot">=</span>  <span class="fl">52.5</span>, </span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"57-64"</span> <span class="ot">=</span> <span class="fl">60.5</span>, </span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"64+"</span> <span class="ot">=</span> <span class="dv">64</span>)</span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$ssb_numeric, useNA = "always")</span></span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep in line with statewide data</span></span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>q78 <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>ssb, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Zero"</span>,</span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"1-8"</span> <span class="ot">=</span> <span class="st">"1-8 ounces"</span>, </span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"9-16"</span> <span class="ot">=</span> <span class="st">"9-16 ounces"</span>,  </span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"17-24"</span> <span class="ot">=</span>  <span class="st">"17-24 ounces"</span>, </span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"25-36"</span> <span class="ot">=</span> <span class="st">"25-36 ounces"</span>,</span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"37-48"</span> <span class="ot">=</span> <span class="st">"37-48 ounces"</span>, </span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"49-56"</span> <span class="ot">=</span>  <span class="st">"49-56 ounces"</span>, </span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"57-64"</span> <span class="ot">=</span> <span class="st">"57-64 ounces"</span>, </span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"64+"</span> <span class="ot">=</span> <span class="st">"64 ounces or more"</span>)</span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Fast Food ----</span></span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>q79 <span class="ot">&lt;-</span> BNSp2b<span class="sc">$</span>eating_out_weekly</span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>ff_numeric <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q79, <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>, </span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"1-2"</span> <span class="ot">=</span> <span class="fl">1.5</span>, </span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"3-4"</span> <span class="ot">=</span> <span class="fl">3.5</span>,</span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"5-6"</span> <span class="ot">=</span> <span class="fl">5.5</span>,</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7-8"</span> <span class="ot">=</span> <span class="fl">7.5</span>, </span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"9-10"</span> <span class="ot">=</span> <span class="fl">9.5</span>, </span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"11+"</span> <span class="ot">=</span> <span class="dv">11</span>)</span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a><span class="co"># table(BNSp2b$ff_numeric, useNA = "always")</span></span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a><span class="co"># Kitchen Access ----</span></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a><span class="co"># I do not regularly have access to a kitchen where I can prepare meals.</span></span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>kitchen_access <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q76_1, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a><span class="co"># Storage Access ----</span></span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a><span class="co"># I have a secure place to store fresh food and pantry items.</span></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>storage_access <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q76_2, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, </span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a><span class="co"># Room for storage ----</span></span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a><span class="co">#  I do not have enough room to store food items.</span></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>storage_room <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>q76_3, <span class="st">"Strongly disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Neither agree nor disagree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"Strongly agree"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a><span class="co"># Physical activity indicator</span></span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a>physical_act_temp <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">select</span>(moderate_exercise_past_week, vigorous_exercise_past_week, strength_training_past_week) <span class="sc">%&gt;%</span> <span class="fu">rowSums</span>()</span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>physical_activity <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(physical_act_temp <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename physical activity variables to match statewide names</span></span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> <span class="fu">rename</span>(BNSp2b, <span class="at">q83_1 =</span> moderate_exercise_past_week,</span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>                 <span class="at">q83_2 =</span> vigorous_exercise_past_week, </span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>                 <span class="at">q83_3 =</span> strength_training_past_week)</span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a><span class="co"># Academic level</span></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a>BNSp2b<span class="sc">$</span>academic_level <span class="ot">&lt;-</span> <span class="fu">recode</span>(BNSp2b<span class="sc">$</span>academic_level, <span class="st">"Junior (60-89 semester units)"</span> <span class="ot">=</span> <span class="st">"Junior"</span>, <span class="st">"Senior (90+ semester units)"</span> <span class="ot">=</span> <span class="st">"Senior"</span>)</span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out people on a meal plan</span></span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">filter</span>((meals_per_week_mp <span class="sc">!=</span> <span class="st">"11+"</span>) <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="cn">TRUE</span>))</span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a>BNSp2b <span class="ot">&lt;-</span> BNSp2b <span class="sc">%&gt;%</span> <span class="fu">select</span>(SNAP3, race_eth, eth_PNTA, eth_hispanic, gender, q7, age, cooking_confident, q82_2,living_with_family, q25, food_insecure_2item, weekly_hours, </span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a>                            health_conscious, q76_9, kitchen_access, q76_1, storage_access, q76_2, storage_room, q76_3, Cohort,</span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a>                            ff_numeric, ssb_numeric, q78, q79, fruits3, q77, units, q38, q39, household_size, monthly_hh_income, paid_work_hours, </span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a>                            unpaid_work_hours, unit_hours, caregiving_hours, q64, q65, school, q46_1, SNAP_eligible, housing_insecure, homelessness_year, </span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a>                            homelessness_month, household_size, firstgen, physical_activity, q83_1, q83_2, q83_3, academic_level,q26, q27, q28, q29, q30, q31, q32, q33)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine data sets</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>bns_combined <span class="ot">&lt;-</span> <span class="fu">rbind</span>(bns_variables, BNSp2b)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(bns_variables)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Additional data management for combined data set (Used for imputations)</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Group other genders into its own category (Some Wording differed between data sets and there were very few other responses)</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q7 <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Man"</span> <span class="sc">~</span> <span class="st">"Male"</span>, bns_combined<span class="sc">$</span>q7 <span class="sc">==</span> <span class="st">"Woman"</span> <span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">grepl</span>(<span class="st">"Gender"</span>, bns_combined<span class="sc">$</span>q7, <span class="at">fixed =</span> <span class="cn">FALSE</span>) <span class="sc">~</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix Capitalization</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q82_2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>q82_2, <span class="st">"Very confident"</span> <span class="ot">=</span> <span class="st">"Very Confident"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix slight word/punctuation changes</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q25 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>q25, <span class="st">"I am temporarily living with friends or relatives, without permanent housing (couch surfing)"</span> <span class="ot">=</span> <span class="st">"I am temporarily living with friends or relatives without permanent housing (i.e. couch surfing)"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Other"</span> <span class="ot">=</span> <span class="st">"Other (Please specify):"</span>, <span class="st">"I am currently living at an outdoor location, abandoned building, car, or other area not meant for regular housing, without permanent housing"</span> <span class="ot">=</span> <span class="st">"I am currently living at an outdoor location, abandoned building, car, or other area not meant for regular housing without permanent housing"</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix slight word changes</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a> bns_combined<span class="sc">$</span>q79 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>q79, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Zero"</span>, </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"1-2"</span> <span class="ot">=</span> <span class="st">"1-2 times per week"</span>, </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"3-4"</span> <span class="ot">=</span> <span class="st">"3-4 times per week"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"5-6"</span> <span class="ot">=</span> <span class="st">"5-6 times per week"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"7-8"</span> <span class="ot">=</span> <span class="st">"7-8 times per week"</span>, </span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"9-10"</span> <span class="ot">=</span> <span class="st">"9-10 times per week"</span>, </span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"11+"</span> <span class="ot">=</span> <span class="st">"11 times or more per week"</span>)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove NAs from citizenship questions from skip logic (to use in imputations)</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q39 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(bns_combined<span class="sc">$</span>q38 <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="st">"Citizen"</span>, <span class="fu">as.factor</span>(bns_combined<span class="sc">$</span>q39))</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q39 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>q39, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Group household income into 6 levels</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>monthly_hh_income <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>monthly_hh_income,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Less than $150"</span> <span class="ot">=</span> <span class="st">"Very Low"</span>, <span class="st">"$150 or less"</span> <span class="ot">=</span> <span class="st">"Very Low"</span>,</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>         <span class="st">"$151-$2,148"</span> <span class="ot">=</span> <span class="st">"Low"</span>, <span class="st">"$151-$2,082"</span> <span class="ot">=</span> <span class="st">"Low"</span>,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>         <span class="st">"$2,149-$2,904"</span> <span class="ot">=</span> <span class="st">"Moderate"</span>, <span class="st">"$2,083-$2,820"</span> <span class="ot">=</span> <span class="st">"Moderate"</span>,</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>         <span class="st">"$2,905-$3,660"</span> <span class="ot">=</span> <span class="st">"High"</span>, <span class="st">"$2,821-$3,556"</span> <span class="ot">=</span> <span class="st">"High"</span>,</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>         <span class="st">"$3,661-$4,418"</span> <span class="ot">=</span> <span class="st">"Very High"</span>, <span class="st">"$3,557-$4,292"</span> <span class="ot">=</span> <span class="st">"Very High"</span>,</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">.default =</span> <span class="st">"Very High"</span>)</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix responses with low sample sizes in q25 (for imputations)</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q25 <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>q25, <span class="st">"I am temporarily living in a homeless shelter without permanent housing"</span> <span class="ot">=</span> <span class="st">"Homeless"</span>,</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"I am currently living at an outdoor location, abandoned building, car, or other area not meant for regular housing without permanent housing"</span> <span class="ot">=</span> <span class="st">"Homeless"</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Change 1/0 responses in SNAP_eligible Variable to Yes/No</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>SNAP_eligible <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>SNAP_eligible, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix class of some variables:</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q25 <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>q25, <span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>units <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(bns_combined<span class="sc">$</span>units, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>Cohort <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>Cohort, <span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>school <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>school, <span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q38 <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>q38, <span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>physical_activity <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>physical_activity, <span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Change Reference values</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>race_eth <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>race_eth, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>race_eth, <span class="at">ref =</span> <span class="st">"Non Hispanic White"</span>)</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>food_insecure_2item <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>food_insecure_2item, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"No"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Yes"</span>) </span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>food_insecure_2item <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>food_insecure_2item, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>food_insecure_2item, <span class="at">ref =</span> <span class="st">"Yes"</span>)</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>health_conscious <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>health_conscious, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>health_conscious, <span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>kitchen_access <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>kitchen_access, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>kitchen_access, <span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>storage_access <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>storage_access, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>storage_access, <span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>storage_room <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>storage_room, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>storage_room, <span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dependent variable forms</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>log_ff <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fl">0.10</span> <span class="sc">+</span> bns_combined<span class="sc">$</span>ff_numeric)</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>log_ssb <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fl">0.10</span> <span class="sc">+</span> bns_combined<span class="sc">$</span>ssb_numeric)</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q77_one_vs_zero <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"0"</span> <span class="sc">~</span> <span class="st">"0"</span>, bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"1-2"</span> <span class="sc">~</span> <span class="st">"1-2"</span>)  <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q77_one_vs_three_or_more <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"3-4"</span> <span class="sc">~</span> <span class="st">"3 or more"</span>, bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"5 or more"</span> <span class="sc">~</span> <span class="st">"3 or more"</span>,</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>                                                   bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"1-2"</span> <span class="sc">~</span> <span class="st">"1-2"</span>)  <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q77_one_vs_three <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"3-4"</span> <span class="sc">~</span> <span class="st">"3-4"</span>, bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"1-2"</span> <span class="sc">~</span> <span class="st">"1-2"</span>)  <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>q77_five_vs_three <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"3-4"</span> <span class="sc">~</span> <span class="st">"3-4"</span>, bns_combined<span class="sc">$</span>q77 <span class="sc">==</span> <span class="st">"5 or more"</span> <span class="sc">~</span> <span class="st">"5+"</span>)  <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a><span class="co"># Change numeric variables to increments of 10</span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>paid_work_hours_tens <span class="ot">&lt;-</span> (bns_combined<span class="sc">$</span>paid_work_hours)<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>unpaid_work_hours_tens <span class="ot">&lt;-</span> (bns_combined<span class="sc">$</span>unpaid_work_hours)<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>caregiving_hours_tens <span class="ot">&lt;-</span> (bns_combined<span class="sc">$</span>caregiving_hours)<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>units_four <span class="ot">&lt;-</span> (bns_combined<span class="sc">$</span>units)<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Change PNTA ethnicity responses to missing for imputations</span></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>race_eth <span class="ot">&lt;-</span> <span class="fu">case_when</span>(bns_combined<span class="sc">$</span>eth_PNTA <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">~</span> <span class="cn">NA</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.factor</span>(bns_combined<span class="sc">$</span>race_eth)) <span class="sc">%&gt;%</span> <span class="fu">droplevels</span>()</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a><span class="co"># Change fast food to categorical</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>ff_cat <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>ff_numeric, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Zero"</span>,</span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"1.5"</span> <span class="ot">=</span> <span class="st">"1-2 times per week"</span>, </span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"3.5"</span> <span class="ot">=</span> <span class="st">"3-4 times per week"</span>,</span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">.default =</span>  <span class="st">"5 or more times per week"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>                                                                                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Zero"</span>, <span class="st">"1-2 times per week"</span>, <span class="st">"3-4 times per week"</span>,<span class="st">"5 or more times per week"</span> ))</span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Change SSB to categorical</span></span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>ssb_cat <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>ssb_numeric, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Zero"</span>,</span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"4.5"</span> <span class="ot">=</span> <span class="st">"1-8 ounces"</span>, </span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"12.5"</span> <span class="ot">=</span> <span class="st">"9-16 ounces"</span>,  </span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">.default =</span> <span class="st">"17 or more ounces"</span>)  <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>, </span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>                                                                                    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Zero"</span>, <span class="st">"1-8 ounces"</span>, <span class="st">"9-16 ounces"</span>, <span class="st">"17 or more ounces"</span>))</span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert "Other" academic year Responses to NA (Small sample size affects imputations and everyone surveyed should fall into one of the 4 categories)</span></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>academic_level <span class="ot">&lt;-</span> <span class="fu">na_if</span>(bns_combined<span class="sc">$</span>academic_level, <span class="st">"Other"</span>) <span class="sc">%&gt;%</span> <span class="fu">droplevels</span>()</span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a><span class="co"># Set Food insecurity as factor and change reference</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>food_insecure_2item <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>food_insecure_2item, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>food_insecure_2item, <span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a><span class="co"># Set housing insecurity as factor and change reference</span></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>homelessness_year <span class="ot">&lt;-</span> <span class="fu">factor</span>(bns_combined<span class="sc">$</span>homelessness_year, <span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(bns_combined<span class="sc">$</span>homelessness_year, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Set firstgen as factor, recode to Yes/No and change reference</span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>firstgen <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>firstgen, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(<span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a><span class="co"># Set homeless_year as factor, recode to Yes/No and change reference</span></span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>bns_combined<span class="sc">$</span>homelessness_year <span class="ot">&lt;-</span> <span class="fu">recode</span>(bns_combined<span class="sc">$</span>homelessness_year, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Yes"</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(<span class="at">order =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">relevel</span>(<span class="at">ref =</span> <span class="st">"No"</span>)</span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a><span class="co"># Set variables to factor</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>bns_combined <span class="ot">&lt;-</span> bns_combined <span class="sc">%&gt;%</span> <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"eth_hispanic"</span>, <span class="st">"firstgen"</span>, <span class="st">"housing_insecure"</span>, <span class="st">"homelessness_year"</span>), as.factor)</span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop those who identified as anything other than male or female and drop non citizens/non lawful permanent residents</span></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a>bns_combined <span class="ot">&lt;-</span> bns_combined <span class="sc">%&gt;%</span> <span class="fu">filter</span>((q7 <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">|</span> q7 <span class="sc">==</span> <span class="st">"Female"</span> ) <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="cn">TRUE</span>), (q39 <span class="sc">!=</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">droplevels</span>()</span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(bns_combined, <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"./clean_data/bns_combined.Rdata"</span>))</span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(bns, <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"./clean_data/bns.Rdata"</span>))</span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(BNSp2b, <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"./clean_data/BNSp2b.Rdata"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>